<!doctype html><html lang=zh-cn>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="bigyue">
<meta name=description content="本文主要初步了解了Hugo中template的基本运行方式，大部分都是官方文档的直译，且可能存在错误。">
<title>Something About Hugo Templating | Big Yue</title>
<link crossorigin=anonymous rel="preload stylesheet" as=style href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css>
<link crossorigin=anonymous rel="preload stylesheet" as=style href=/css/main.min.css>
<link crossorigin=anonymous rel="preload stylesheet" as=style href=/css/markdown.min.css>
<script defer crossorigin=anonymous src=/js/base.min.js></script>
<body>
<header class=bar>
<div id=title-group class="group-row single-row no-select">
<span>Big Yue</span>
<div class=divider-vertical></div>
<span>这是一个博客网站</span>
<div class=divider-vertical></div>
<span>© 2021 bigyue</span>
<div class=divider-vertical></div>
<span>Powered by <a rel="noopener noreferrer" target=_blank href=https://gohugo.io/>Hugo</a> & theme  <a rel="noopener noreferrer" href=https://github.com/yue1124/hero target=_blank>hero</a></span>
</div>
</header>
<nav class="bar group-row no-select">
<div id=control-group class="group-row single-row">
<div class=group-item onclick=window.history.back()>
<i class="fas fa-arrow-left"></i>
</div>
<div class=group-item onclick=window.history.forward()>
<i class="fas fa-arrow-right"></i>
</div>
<a class=group-item href=https://yue1124.github.io/posts/>
<i class="fas fa-arrow-up"></i>
</a>
<div class=group-item onclick=location.reload()>
<i class="fas fa-redo"></i>
</div>
</div>
<div id=breadcrumb class="group-row single-row">
<div class=group-item><i class="fas fa-folder"></i> </div>
<a class=group-item href=https://yue1124.github.io/posts/><i class="fas fa-chevron-right"></i> Posts</a>
<a class="group-item active" href=https://yue1124.github.io/posts/something-about-hugo-templating/><i class="fas fa-chevron-right"></i> Something About Hugo Templating</a>
</div>
<div id=search-group class="group-row single-row">
<div class=group-item>
<i class="fas fa-search"></i>
</div>
<input id=search-input class=group-item type=text aria-label="search input">
</div>
</nav>
<main class="main group-row">
<aside class="aside group-col">
<div id=menu-group class="group-col no-select">
<div class=group-item>
<i class="fas fa-star"></i> 快速访问
</div>
<a class="group-item level-2" href=/categories/>
<i class="fas fa-asterisk"></i> 分类
</a>
<a class="group-item level-2" href=/tags/>
<i class="fas fa-tags"></i> 标签
</a>
<a class="group-item level-2" href=/about/>
<i class="fas fa-user"></i> 相关信息
</a>
</div>
<div id=section-group class="group-col no-select">
<a class=group-item href=https://yue1124.github.io/>
<i class="fas fa-home"></i> Big Yue
</a>
<a class="group-item level-2" href=https://yue1124.github.io/posts/>
<i class="fas fa-hdd"></i> Posts
</a>
</div>
<div id=social-group class="group-col no-select">
<div class=group-item>
<i class="fas fa-user-friends"></i> 其他信息
</div>
<a class="group-item level-2" rel="noopener noreferrer" target=_blank href=https://github.com/yue1124>
<i class="fab fa-github"></i> github
</a>
<a class="group-item level-2" rel="noopener noreferrer" target=_blank href=https://gitee.com/bigyue>
<i class="fab fa-github"></i> gitee
</a>
</div>
<div id=abstract-group class=group-col>
<div class=group-item><i class="fas fa-angle-right"></i> Author: bigyue</div>
<div class=group-item><i class="fas fa-angle-right"></i> Date: 2021/10/16 </div>
<div class=group-item>
<span style=float:left><i class="fas fa-angle-right"></i> Tags:&nbsp;&nbsp;</span>
<a class=tag href=/tags/hugo>hugo</a>
<a class=tag href=/tags/template>template</a>
</div>
<div class=group-item>
<span style=float:left><i class="fas fa-angle-right"></i> Description:&nbsp;&nbsp;</span>
<span>本文主要初步了解了Hugo中template的基本运行方式，大部分都是官方文档的直译，且可能存在错误。</span>
</div>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#基本语法>基本语法</a></li>
<li><a href=#includes方式>Includes方式</a></li>
<li><a href=#逻辑处理>逻辑处理</a>
<ul>
<li><a href=#迭代>迭代</a></li>
<li><a href=#条件判断>条件判断</a></li>
</ul>
</li>
<li><a href=#管道pipe>管道Pipe</a></li>
<li><a href=#上下文>上下文</a></li>
<li><a href=#空白与注释>空白与注释</a></li>
</ul>
</nav>
</div>
</aside>
<section class=content>
<article id=markdown class=markdown>
<p>Hugo 使用Go的<code>html/template</code>以及<code>text/template</code>标准库作为<code>templating</code>的基础。</p>
<p>所以如果要更深入地了解Hugo中的Templating，可以将标准库再深入看看。</p>
<h2 id=基本语法>基本语法</h2>
<p>Go Templates基本应用再HTML文件中，使用<code>{{ }}</code>包裹，Go Template会解析对应地变量或者执行相应的方法。</p>
<p><strong>变量</strong></p>
<p>已存在的变量 <code>{{ .Title }}</code></p>
<blockquote>
<p>在Hugo中，会给每个template传递<code>Page</code>对象作为template中变量的默认作用域，所以上述的<code>{{ .Title }}</code>实际上访问的是<code>Page</code>对象中的<code>Title</code>参数。这个<code>Page</code>对象通常也称为<code>Context</code>上下文对象，所谓的<code>{{ . }}</code>其实指向的是上下文对象。</p>
</blockquote>
<p>自定义的变量<code>{{ $address }}</code></p>
<blockquote>
<p>声明自定义的变量时赋值 <code>{{ $address := "123 st" }}</code></p>
<p>为已声明的自定义变量再赋值 <code>{{ $address = "1 st" }}</code></p>
</blockquote>
<p><strong>方法</strong></p>
<p><code>{{ FUNCTION ARG1 ARG2 .. }}</code> eg: <code>{{ add 1 2 }}</code> 将执行<code>add</code>方法，并将1，2作为参数</p>
<p>Hugo提供了一些基础的方法，当然也会教会我们如何扩展方法，不过使用扩展的方法可能需要重新编译Hugo。</p>
<h2 id=includes方式>Includes方式</h2>
<p>在模板中include其他模板是非常常见的功能。</p>
<p>在Hugo中提供<code>partial</code>方法和<code>template</code>方法来包含其他模板。</p>
<p><code>{{ partial "hearder.html" . }}</code></p>
<blockquote>
<p>该方法将会包含<code>layouts/partials/header.html</code>文件</p>
<p>不要忘了最后的一个点 能够将上下文信息传递给所包含的模板</p>
</blockquote>
<p><code>{{ template "_internal/&lt;TEMPLATE>.&lt;EXTENSION>" }}</code></p>
<blockquote>
<p><code>template</code>是老版本的方法，现在这个方法只用来引入<code>internal templates</code>，这个东西之后再了解吧。</p>
</blockquote>
<h2 id=逻辑处理>逻辑处理</h2>
<h3 id=迭代>迭代</h3>
<p>使用<code>range</code>方法对<code>map，array，or slice</code>对象进行迭代，在模板中是大量使用的。</p>
<p>通过下面的例子学习一下用法吧</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ range $array }}
	{{ . }} <span style=color:#75715e>&lt;!-- 点表示变量array中的元素 --&gt;</span>
{{ end }}

{{ range $elem_val := $array }} <span style=color:#75715e>&lt;!-- 也可以用自定义变量的方式增加可读性 --&gt;</span>
	{{ $elem_val }}
{{ end }}

{{ range $elem_index, $elem_val := $array }} <span style=color:#75715e>&lt;!-- 对于数组，可以是 index, value --&gt;</span>
	{{ $elem_index }} -- {{ $elem_val }}
{{ end }}

{{ range $elem_key, $elem_val := $map }} <span style=color:#75715e>&lt;!-- 对于键值对，则是 key, value --&gt;</span>
	{{ $elem_key }} -- {{ $elem_val }}
{{ end }}

{{ range $array }}
	{{ . }}
{{ else }}
	<span style=color:#75715e>&lt;!-- range中的else是对所迭代元素是否为空的判断，只有当array是空的时候，才会渲染这里 --&gt;</span>
{{ end }}
</code></pre></div><h3 id=条件判断>条件判断</h3>
<p><code>if, else, with, or, and, not</code>能够提供条件判断的能力，其中<code>if, with</code>需要和<code>range</code>一样，使用<code>{{ end }}</code>表明结尾。</p>
<p>在条件判断中，以下情形被认为是<code>false</code></p>
<ul>
<li>布尔值<code>false</code></li>
<li><code>0</code></li>
<li>长度为0的<code>array, slice, map, string</code></li>
</ul>
<h4 id=with><strong><code>with</code></strong></h4>
<p><code>with</code>是表达某物存在的意思，比如<code>with xx</code>，表示<code>xx</code>存在的话则&mldr;。这一点和<code>if xx</code>效果一样，只不过<code>with</code>还能检测变量是否存在。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ with .Params.title }} <span style=color:#75715e>&lt;!-- 只有当title变量存在且不为false时，以下内容才会被渲染 --&gt;</span>
	&lt;<span style=color:#f92672>span</span>&gt;{{ . }}&lt;/<span style=color:#f92672>span</span>&gt; <span style=color:#75715e>&lt;!-- 和range 一样 . 会被绑定成对应的title变量 --&gt;</span>
{{ else }}
	<span style=color:#75715e>&lt;!-- with中支持使用else对其他情况进行处理 --&gt;</span>
{{ end }}
</code></pre></div><h4 id=if><strong><code>if</code></strong></h4>
<p><code>if .. else</code>以及<code>else if</code>都是支持的，这一点很好懂的，这里就不赘述了。</p>
<h2 id=管道pipe>管道Pipe</h2>
<p>所谓管道，其实是指<code>Action</code>的堆叠。简言之，当我们需要按顺序执行一连串动作时，就可以使用管道。</p>
<p>之所以称为管道，是因为前者的输出可以直接作为后者的输入，信息就像在管道中流动一样。</p>
<p><code>{{ shuffle (seq 1 5) }}</code>比如这个没有使用管道的版本中，执行两个方法<code>seq</code>和<code>shuffle</code>，其中<code>seq</code>的输出作为<code>shuffle</code>的输入，因此可以用管道的方式这么写</p>
<p><code>{{ (seq 1 5) | shuffle }}</code> 管道中每个<code>action</code>用<code>|</code>隔开，当有更多按顺序执行的方法时，使用管道方式将更具有可读性，简洁性。</p>
<p>比如</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ if or (or (isset .Params &#34;title&#34;) (isset .Params &#34;caption&#34;)) (isset .Params &#34;attr&#34;) }}
{{ end }}
<span style=color:#75715e>&lt;!-- 以上能被重写成以下的样子 --&gt;</span>
{{ if isset .Params &#34;capthion&#34; | or isset .Param &#34;title&#34; | or isset .Params &#34;attr&#34; }}
{{ end }}
</code></pre></div><h2 id=上下文>上下文</h2>
<p>我们已经了解到<code>{{ . }}</code>实际上代表的是上下文，也知道在<code>range</code>，<code>with</code>中会将上下文绑定到局部变量中。此时则可以使用<code>{{ $. }}</code>表示全局的上下文变量。</p>
<blockquote>
<p>所以在包含其他模板时，最后的<code>.</code>其实就是传递上下文变量给其他模板。</p>
</blockquote>
<h2 id=空白与注释>空白与注释</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>div</span>&gt;
    {{ .Title }}
&lt;/<span style=color:#f92672>div</span>&gt;
<span style=color:#75715e>&lt;!-- 以上内容可能被渲染成如下 --&gt;</span>
&lt;<span style=color:#f92672>div</span>&gt;
    Hello, World!
&lt;/<span style=color:#f92672>div</span>&gt;
<span style=color:#75715e>&lt;!-- 通过使用连字符 - 删除两边的空白 --&gt;</span>
&lt;<span style=color:#f92672>div</span>&gt;
    {{- .Title -}}
&lt;/<span style=color:#f92672>div</span>&gt;
<span style=color:#75715e>&lt;!-- 渲染结果如下, 空白被删除了 --&gt;</span>
&lt;<span style=color:#f92672>div</span>&gt;Hello, World!&lt;/<span style=color:#f92672>div</span>&gt;
</code></pre></div><p>使用<code>{{/* 这是一个注释 */}}</code>，可以在模板中写注释，注释最后将被忽略</p>
<p>HTML本身的注释语句最终也会被模板所删除，但如果HTML的注释语句中包含Go Template语句，也是会被执行的。</p>
</article>
</section>
</main>
</body>
</html>